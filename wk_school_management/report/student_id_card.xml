<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2016-Present Webkul Software Pvt. Ltd. (<https://webkul.com/>) -->
<!-- See LICENSE file for full copyright and licensing details. -->
<!-- License URL : https://store.webkul.com/license.html/ -->
<odoo>
    <record id="student_student_general_icard" model="ir.actions.report">
        <field name="name">Student ID Card</field>
        <field name="model">student.student</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">wk_school_management.print_id_card_general_layout</field>
        <field name="report_file">wk_school_management.print_id_card_general_layout</field>
        <field name="print_report_name">'%s - ID Card' % (object.name).replace('/', '')</field>
        <field name="binding_model_id" ref="model_student_student"/>
        <field name="binding_type">report</field>
    </record>

    <template id="print_id_card_general_layout">
        <t t-set="layout" t-value="request.env['ir.config_parameter'].sudo().get_param('wk_school_management.card_layout') or 'horizontal'"/>
        <t t-if="layout == 'horizontal'">
            <t t-call="wk_school_management.print_student_badge_horizontal"/>
        </t>
        <t t-elif="layout == 'vertical'">
            <t t-call="wk_school_management.print_student_badge_vertical"/>
        </t>
    </template>

    <template id="print_student_badge_vertical">
        <t t-call="web.basic_layout">
            <div class="page">
                <t t-foreach="docs" t-as="student">
                    <div class="col-md-6">
                        <div style="width:165pt; height:242pt; border:1pt solid black; border-collapse:separate; border-radius:8pt; margin:8pt">
                            <div style="display: inline-block; width: 55pt; vertical-align: top; text-align: center;">
                                <p t-if="student.company_id.logo">
                                    <img t-att-src="image_data_uri(student.company_id.logo)" style="height:28pt; max-width:50pt;" alt="Company Logo"/>
                                </p>
                            </div>
                            <div style="display: inline-block;">
                                <div t-if="student.company_id.name">
                                    <h6 style="font-size:10pt; margin:0;" t-out="student.company_id.name"/>
                                </div>
                                <div t-if="student.company_id.street" style="margin:0;">
                                    <p t-out="student.company_id.street" style="font-size:7pt;margin-bottom:0;"/>
                                </div>
                                <div t-if="student.company_id.phone" >
                                    <p t-out="student.company_id.phone" style="font-size:8pt; margin-bottom:0;"/>
                                </div>
                            </div>
                            <div class="m-1" style="height:70%;margin-top:0% !important">
                                <div>
                                    <div t-if="student.student_image"  align="center" valign="center">
                                        <img t-att-src="image_data_uri(student.student_image)" style="height:55pt;width:55%; border-radius:7%;" alt="student Image"/><br/>
                                    </div>
                                    <div t-else="">
                                        <img src="/wk_school_management/static/src/img/user.png" style="height:85pt;width:60%; border-radius:8px;" alt="student Image"/><br/>
                                    </div>
                                    <div align="center" valign="center">
                                        <strong><span t-out="student.name">Marc Demo</span></strong>
                                    </div>
                                    <div t-if="student.current_grade_id" style="font-size: 12px; color: #333;">
                                        <strong >Grade: </strong >
                                        <t t-out="student.current_grade_id.name">12</t>
                                    </div>
                                    <div t-if="student.dob" style="font-size: 12px; color: #333;">
                                        <strong >D.O.B.: </strong >
                                        <t t-out="student.dob" t-options="{'widget': 'date'}"/>
                                    </div>
                                    <div t-if="student.mobile" style="font-size: 12px; color: #333;">
                                        <strong >Mobile: </strong >
                                        <t t-out="student.mobile"/>
                                    </div>
                                    <div style="font-size: 12px; color: #333;">
                                        <strong >Address: </strong >
                                        <t style="font-size: 8px;" t-out="student.street"/> 
                                        <t style="font-size: 8px;" t-out="student.street2"/>
                                        <t style="font-size: 8px;" t-out="student.city"/> 
                                        <t style="font-size: 8px;" t-out="student.state_id.name"/> 
                                        <t style="font-size: 8px;" t-out="student.zip"/>,
                                        <t style="font-size: 8px;" t-out="student.country_id.name"/>
                                    </div>
                                    <t t-if="student.barcode">
                                        <div class="mt-2" style="position: relative; height: 35pt; width: 100%; overflow: hidden; margin-top: -3pt;">
                                            <span t-field="student.barcode"
                                                t-options="{
                                                    'widget': 'barcode',
                                                    'width': 1000,
                                                    'height': 55,
                                                    'img_style': 'position: absolute; top: -8pt; left: -44pt; width: 154%; height: 45pt;'
                                                }" data-oe-demo="12345678901">
                                            </span>
                                        </div>
                                    </t>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div t-if="student.current_enrollment_id.qr_code" class="col-md-6" style="margin-top:50%">
                        <div style="width:165pt; height:242pt; border:1pt solid black; border-collapse:separate; border-radius:8pt; margin:8pt;">
                            <div style="height:100%;">
                                <div align="center">
                                    <p class="mt-3" t-if="student.company_id.logo">
                                        <img t-att-src="image_data_uri(student.company_id.logo)" style="height:25pt;" alt="Company Logo"/>
                                    </p>
                                    <div t-if="student.company_id.name">
                                        <h6 style="font-size:11pt; margin:0;" t-out="student.company_id.name"/>
                                    </div>
                                    <div t-if="student.company_id.street" style="margin:0;">
                                        <p t-out="student.company_id.street" style="font-size:9pt;margin-bottom:0;"/>
                                    </div>
                                    <div t-if="student.company_id.phone" >
                                        <p t-out="student.company_id.phone" style="font-size:9pt; margin-bottom:0;"/>
                                    </div>
                                    <div class="mt-3" t-if="student.current_enrollment_id.qr_code">
                                        <img t-att-src="image_data_uri(student.current_enrollment_id.qr_code)" style="height:70pt;width:75pt;" alt="Student QR Code"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </t>
            </div>
        </t>
    </template>


</odoo>
